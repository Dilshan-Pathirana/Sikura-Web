"use strict";(()=>{var e={};e.id=129,e.ids=[129],e.modules={1185:e=>{e.exports=require("mongoose")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5205:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>f,patchFetch:()=>h,requestAsyncStorage:()=>m,routeModule:()=>c,serverHooks:()=>g,staticGenerationAsyncStorage:()=>v});var n={};r.r(n),r.d(n,{GET:()=>d,POST:()=>p});var i=r(9303),o=r(8716),a=r(670),s=r(7070),u=r(3626),l=r(1600);async function d(){await (0,u.ZP)();let e=await l.Z.find({}).limit(50).lean();return s.NextResponse.json(e)}async function p(e){let t=await e.json();await (0,u.ZP)();let r=new l.Z(t);return await r.save(),s.NextResponse.json({insertedId:r._id})}let c=new i.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/videos/route",pathname:"/api/videos",filename:"route",bundlePath:"app/api/videos/route"},resolvedPagePath:"E:\\new-web\\Sikura-Web\\app\\api\\videos\\route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:m,staticGenerationAsyncStorage:v,serverHooks:g}=c,f="/api/videos/route";function h(){return(0,a.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:v})}},3626:(e,t,r)=>{r.d(t,{ZP:()=>s});var n=r(1185),i=r.n(n);let o=process.env.MONGODB_URI;if(!o)throw Error("Please define the MONGODB_URI environment variable");let a=global._mongooseCache||{conn:null,promise:null},s=async function(){return a.conn||(a.promise||(a.promise=i().connect(o,{bufferCommands:!1}).then(()=>i())),a.conn=await a.promise),a.conn}},4530:(e,t,r)=>{function n(e){if(!e)return null;try{let t=new URL(e.trim()),r=t.hostname.toLowerCase();if(!("drive.google.com"===r||"docs.google.com"===r))return null;let n=t.pathname.match(/\/file\/d\/([a-zA-Z0-9_-]+)/);if(n?.[1])return n[1];let i=t.searchParams.get("id");if(i)return i;let o=t.pathname.match(/\/d\/([a-zA-Z0-9_-]+)/);if(o?.[1])return o[1];return null}catch{return null}}function i(e){return!!n(e)}function o(e){let t=n(e);return t?`https://drive.google.com/file/d/${t}/preview`:null}r.d(t,{_I:()=>i,fP:()=>o})},1600:(e,t,r)=>{r.d(t,{Z:()=>s});var n=r(1185),i=r.n(n),o=r(4530);let a=new n.Schema({title:{type:String,required:!0,index:!0},slug:{type:String,required:!0,unique:!0,index:!0},categoryId:{type:n.Schema.Types.ObjectId,ref:"Category",required:!0,index:!0},videoUrl:{type:String,required:!0,validate:{validator:e=>(0,o._I)(e),message:"videoUrl must be a valid Google Drive shared file link"}},description:{type:String},thumbnail:{type:String}},{timestamps:!0});a.index({title:"text",description:"text"}),a.index({slug:1},{unique:!0});let s=i().models.Operation||i().model("Operation",a)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[276,972],()=>r(5205));module.exports=n})();